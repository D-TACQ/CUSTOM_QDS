# EXPRESSIONS: load 4 times for yy 1..4


# RW diamond
record(bo, "${UUT}:QDS:TERM:EN:${yy}") {
	field(DTYP, "Soft Channel")
	field(DESC, "Enable Term $yy")
	field(FLNK, "${UUT}:QDS:TERM:EN:${yy}:w PP")	
	field(PINI, "YES")
	field(DOL,  "0")
}

record(bo, "${UUT}:QDS:TERM:EN:${yy}:w") {
	field(DTYP, "stream")
	field(OUT,  "@qds.proto set_term_en(${yy}) ${SPORT}")
	field(DISV, "1")
	field(SDIS, "${UUT}:QDS:TERM:EN:${yy}:r.PACT")
	field(OMSL, "closed_loop")
	field(DOL,  "${UUT}:QDS:TERM:EN:${yy}")
}

record(bi, "${UUT}:QDS:TERM:EN:${yy}:r") {
	field(DTYP, "stream")
	field(INP,  "@qds.proto get_term_en(${yy}) ${SPORT}")
	field(SCAN, "1 second")
	field(FLNK, "${UUT}:QDS:TERM:EN:${yy}:s")
}

record(bo, "${UUT}:QDS:TERM:EN:${yy}:s") {
	field(DTYP, "Soft Channel")
	field(OMSL, "closed_loop")
	field(DOL,  "${UUT}:QDS:TERM:EN:${yy}:r NPP")
	field(OUT,  "${UUT}:QDS:TERM:EN:${yy}")
}


record(bi, "${UUT}:QDS:TERM:STAT:${yy}") {
	field(DTYP, "stream")
	field(DESC, "Term has triggered $yy")
	field(INP,  "@qds.proto get_term_stat(${yy}) ${SPORT}")
	field(SCAN, ".5 second")
}

record(bo, "${UUT}:QDS:TERM:STAT:${yy}:CLR") {
	field(DTYP, "stream")
	field(DESC, "clear $yy status")
	field(OUT,  "@qds.proto clr_term_stat(${yy}) ${SPORT}")	
}
# RW diamond
record(ao, "${UUT}:QDS:THRESH:${yy}") {
	field(DTYP, "Soft Channel")
	field(LOPR, "1")
	field(HOPR, "16")
	field(DESC, "Select Threshold")
	field(FLNK, "${UUT}:QDS:THRESH:${yy}:w PP")
        field(DRVL, "-10.000")
        field(DRVH, "+9.999")
        field(LINR, "LINEAR")
        field(ESLO, "3.0518e-4")
        field(HOPR, "9.999")
        field(LOPR, "-10.000")
        field(EGU,  "V")		
	field(PINI, "YES")
}

record(ao, "${UUT}:QDS:THRESH:${yy}:w") {
	field(DTYP, "stream")
	field(OUT,  "@qds.proto set_thresh(${yy}) ${SPORT}")
	field(DISV, "1")
	field(SDIS, "${UUT}:QDS:THRESH:${yy}:w.PACT")
	field(OMSL, "closed_loop")
	field(DOL,  "${UUT}:QDS:THRESH:${yy}")
        field(DRVL, "-10.000")
        field(DRVH, "+9.999")
        field(LINR, "LINEAR")
        field(ESLO, "3.0518e-4")
        field(HOPR, "9.999")
        field(LOPR, "-10.000")
        field(EGU,  "V")	
}

record(ai, "${UUT}:QDS:THRESH:${yy}:r") {
	field(DTYP, "stream")
	field(INP,  "@qds.proto get_thresh(${yy}) ${SPORT}")
	field(SCAN, "1 second")
	field(FLNK, "${UUT}:QDS:THRESH:${yy}:s")
        field(LINR, "LINEAR")
        field(ESLO, "3.0518e-4")
        field(HOPR, "9.999")
        field(LOPR, "-10.000")
        field(EGU,  "V")	
}

record(ao, "${UUT}:QDS:THRESH:${yy}:s") {
	field(DTYP, "Soft Channel")
	field(OMSL, "closed_loop")
	field(DOL,  "${UUT}:QDS:THRESH:${yy}:r NPP")
	field(OUT,  "${UUT}:QDS:THRESH:${yy}")
        field(DRVL, "-10.000")
        field(DRVH, "+9.999")
        field(LINR, "LINEAR")
        field(ESLO, "3.0518e-4")
        field(HOPR, "9.999")
        field(LOPR, "-10.000")
        field(EGU,  "V")	
}
